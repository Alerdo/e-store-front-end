1-Fix the isAuthenticated Function

2- req.user is not assiging value apperantly, so check the pssport.js , the problem should be there 


3
Add to cart 

Expected on db 
cart_id , product_id , quantity
Check the router:


Problem: CORS 
Backend: CORS & Session Setup

Copy code
const corsOptions = {
  origin: 'http://localhost:3000',
  credentials: true,
};
app.use(cors(corsOptions));

app.use(
  session({
    secret: 'your-secret-key',
    resave: false,
    saveUninitialized: false,
    cookie: {
      secure: false, // Set to true if using HTTPS
      maxAge: 24 * 60 * 60 * 1000, // 24 hours
    },
  })
);
Passport: In your Passport setup, ensure that serialization and deserialization of the user are done correctly.

]
passport.serializeUser((user, done) => {
  done(null, user.id);
});
passport.deserializeUser((id, done) => {
  // Fetch user by ID
  done(null, user);
});
Frontend: Fetch/Axios Request Setup
Credentials: When making fetch or Axios requests, make sure to include credentials. This is crucial for cookies to be sent and received across origins.


fetch(url, {
  method: 'POST',
  credentials: 'include', // Important
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify(data),
});



Problem: 
Cart items only fetches the product_id and not the product information, 
Solution:
To achive that we perfom a join operation using sequlize. 


Problem: 
req.login wont work on the /register route, 
the user gets registred but not loged in. 
Solution:
To solve this I added 2 requests on the register front end request. 
1 to register, and depending on the data another one to log in the user. 
